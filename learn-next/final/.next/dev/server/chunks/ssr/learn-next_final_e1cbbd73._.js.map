{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/peachpetal/workspace/FE7_DevCourse/learn-next/final/src/components/auth/AdditionalInfoForm.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/learn-next/final/src/components/auth/AdditionalInfoForm.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/learn-next/final/src/components/auth/AdditionalInfoForm.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,kSAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAA+T,GAC5V,6FACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 18, "column": 0}, "map": {"version":3,"sources":["file:///home/peachpetal/workspace/FE7_DevCourse/learn-next/final/src/components/auth/AdditionalInfoForm.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/learn-next/final/src/components/auth/AdditionalInfoForm.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/learn-next/final/src/components/auth/AdditionalInfoForm.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,kSAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAA2S,GACxU,yEACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 32, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 40, "column": 0}, "map": {"version":3,"sources":["file:///home/peachpetal/workspace/FE7_DevCourse/learn-next/final/src/app/%28secret%29/additionalInfo/page.tsx"],"sourcesContent":["import AdditionalInfoForm from \"@/components/auth/AdditionalInfoForm\";\nimport { FormState } from \"@/types\";\nimport { createClient } from \"@/utils/supabase/server\";\nimport { redirect } from \"next/navigation\";\n\nexport default async function AdditionalInfoPage({\n  searchParams,\n}: {\n  searchParams: Promise<{ url: string }>;\n}) {\n  const { url } = await searchParams;\n  const supabase = await createClient();\n\n  const {\n    data: { user },\n    error: userError,\n  } = await supabase.auth.getUser();\n\n  if (userError || !user) {\n    redirect(url ? url : \"/\"); // or redirect(\"/login\")\n  }\n\n  const { data: profileRows, error: profileError } = await supabase\n    .from(\"profiles\")\n    .select(\"*\")\n    .eq(\"id\", user.id)\n    .single();\n\n  if (profileError) {\n    redirect(\"/auth/login-failed\");\n  }\n\n  const profile = profileRows;\n\n  // 서버 액션 정의 (폼이 이 함수를 호출하게 됨)\n  async function updateProfile(\n    prevState: FormState,\n    formData: FormData\n  ): Promise<FormState> {\n    \"use server\";\n\n    const supabase = await createClient();\n    const {\n      data: { user },\n      error: userError,\n    } = await supabase.auth.getUser();\n\n    if (!user || userError) {\n      return {\n        success: false,\n        error: \"로그인이 필요합니다.\",\n      };\n    }\n\n    const displayName = formData.get(\"display_name\")?.toString() ?? \"\";\n    const bio = formData.get(\"bio\")?.toString() ?? \"\";\n\n    if (!bio) {\n      return {\n        success: false,\n        error: \"입력 값을 모두 채워주세요\",\n      };\n    }\n\n    const { error: updateErrors } = await supabase\n      .from(\"profiles\")\n      .update({ display_name: displayName, bio })\n      .eq(\"id\", user.id);\n\n    if (updateErrors) {\n      return {\n        success: false,\n        error: \"프로필 저장중에 문제가 발생하였습니다.\",\n      };\n    }\n\n    return { success: true, error: null };\n  }\n\n  return (\n    <div className=\"max-w-md mx-auto mt-16\">\n      <div className=\"space-y-8\">\n        <div className=\"space-y-2\">\n          <h1 className=\"text-3xl font-light tracking-tight\">\n            Complete Your Profile\n          </h1>\n          <p className=\"text-gray-400 text-sm\">\n            Tell us a bit more about yourself\n          </p>\n        </div>\n\n        <div className=\"border border-gray-800 rounded-lg p-8 bg-gray-900/30\">\n          <AdditionalInfoForm\n            profile={profile}\n            action={updateProfile}\n            url={url}\n          />\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;;;;AAAA;AAEA;AACA;AAAA;;;;;;MA+BE,6BAA6B;AAC7B,wBAAA,eAAe,cACb,SAAoB,EACpB,QAAkB;IAIlB,MAAM,WAAW,MAAM,IAAA,4KAAY;IACnC,MAAM,EACJ,MAAM,EAAE,IAAI,EAAE,EACd,OAAO,SAAS,EACjB,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;IAE/B,IAAI,CAAC,QAAQ,WAAW;QACtB,OAAO;YACL,SAAS;YACT,OAAO;QACT;IACF;IAEA,MAAM,cAAc,SAAS,GAAG,CAAC,iBAAiB,cAAc;IAChE,MAAM,MAAM,SAAS,GAAG,CAAC,QAAQ,cAAc;IAE/C,IAAI,CAAC,KAAK;QACR,OAAO;YACL,SAAS;YACT,OAAO;QACT;IACF;IAEA,MAAM,EAAE,OAAO,YAAY,EAAE,GAAG,MAAM,SACnC,IAAI,CAAC,YACL,MAAM,CAAC;QAAE,cAAc;QAAa;IAAI,GACxC,EAAE,CAAC,MAAM,KAAK,EAAE;IAEnB,IAAI,cAAc;QAChB,OAAO;YACL,SAAS;YACT,OAAO;QACT;IACF;IAEA,OAAO;QAAE,SAAS;QAAM,OAAO;IAAK;AACtC;yQA1CA;AA9Ba,eAAe,mBAAmB,EAC/C,YAAY,EAGb;IACC,MAAM,EAAE,GAAG,EAAE,GAAG,MAAM;IACtB,MAAM,WAAW,MAAM,IAAA,4KAAY;IAEnC,MAAM,EACJ,MAAM,EAAE,IAAI,EAAE,EACd,OAAO,SAAS,EACjB,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;IAE/B,IAAI,aAAa,CAAC,MAAM;QACtB,IAAA,2NAAQ,EAAC,MAAM,MAAM,MAAM,wBAAwB;IACrD;IAEA,MAAM,EAAE,MAAM,WAAW,EAAE,OAAO,YAAY,EAAE,GAAG,MAAM,SACtD,IAAI,CAAC,YACL,MAAM,CAAC,KACP,EAAE,CAAC,MAAM,KAAK,EAAE,EAChB,MAAM;IAET,IAAI,cAAc;QAChB,IAAA,2NAAQ,EAAC;IACX;IAEA,MAAM,UAAU;QAGD,gBAAf;IA4CA,qBACE,wQAAC;QAAI,WAAU;kBACb,cAAA,wQAAC;YAAI,WAAU;;8BACb,wQAAC;oBAAI,WAAU;;sCACb,wQAAC;4BAAG,WAAU;sCAAqC;;;;;;sCAGnD,wQAAC;4BAAE,WAAU;sCAAwB;;;;;;;;;;;;8BAKvC,wQAAC;oBAAI,WAAU;8BACb,cAAA,wQAAC,qLAAkB;wBACjB,SAAS;wBACT,QAAQ;wBACR,KAAK;;;;;;;;;;;;;;;;;;;;;;AAMjB","debugId":null}},
    {"offset": {"line": 166, "column": 0}, "map": {"version":3,"sources":["file:///home/peachpetal/workspace/FE7_DevCourse/learn-next/final/.next-internal/server/app/%28secret%29/additionalInfo/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {$$RSC_SERVER_ACTION_0 as '60ce505b1335b2b5785a524f25d7b5eba78c539ab1'} from 'ACTIONS_MODULE0'\n"],"names":[],"mappings":";AAAA","debugId":null}},
    {"offset": {"line": 183, "column": 0}, "map": {"version":3,"sources":["file:///home/peachpetal/workspace/FE7_DevCourse/learn-next/final/node_modules/next/src/build/webpack/loaders/next-flight-loader/server-reference.ts"],"sourcesContent":["/* eslint-disable import/no-extraneous-dependencies */\nexport { registerServerReference } from 'react-server-dom-webpack/server'\n"],"names":["registerServerReference"],"mappings":"AAAA,oDAAoD;;;+BAC3CA,2BAAAA;;;eAAAA,QAAAA,uBAAuB;;;wBAAQ","ignoreList":[0],"debugId":null}}]
}