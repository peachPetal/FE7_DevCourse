{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 40, "column": 0}, "map": {"version":3,"sources":["file:///home/peachpetal/workspace/FE7_DevCourse/learn-next/final/src/utils/supabase/client.ts"],"sourcesContent":["import { createBrowserClient } from \"@supabase/ssr\";\nimport { Database } from \"./supabase\";\n\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;\nconst supabaseKey = process.env.NEXT_PUBLIC_SUPABASE_PUBLISHABLE_KEY;\n\nexport const createClient = () =>\n  createBrowserClient<Database>(supabaseUrl!, supabaseKey!);\n"],"names":[],"mappings":";;;;AAAA;AAAA;;AAGA,MAAM;AACN,MAAM;AAEC,MAAM,eAAe,IAC1B,IAAA,2NAAmB,EAAW,aAAc","debugId":null}},
    {"offset": {"line": 72, "column": 0}, "map": {"version":3,"sources":["file:///home/peachpetal/workspace/FE7_DevCourse/learn-next/final/src/components/post/WriteForm.tsx"],"sourcesContent":["\"use client\";\n\nimport { createClient } from \"@/utils/supabase/client\";\nimport { X } from \"lucide-react\";\nimport { useRouter, useSearchParams } from \"next/navigation\";\nimport { useEffect, useState } from \"react\";\n\nexport default function WriteForm() {\n  // ?post_id=1\n  const searchParams = useSearchParams();\n  const postId = searchParams.get(\"post_id\"); // 1\n\n  const router = useRouter();\n  const supabase = createClient();\n\n  const [title, setTitle] = useState(\"\"); // 제목\n  const [content, setContent] = useState(\"\"); // 내용\n  const [tags, setTags] = useState<string[]>([]); // 태그\n  const [tagInput, setTagInput] = useState(\"\"); // 태그 입력창\n  const [submitting, setSubmitting] = useState(false);\n\n  const addTag = () => {\n    if (tagInput.trim() && !tags.includes(tagInput.trim())) {\n      setTags([...tags, tagInput.trim()]);\n      setTagInput(\"\");\n    }\n  };\n\n  const removeTag = (tagToRemove: string) => {\n    setTags(tags.filter((tag) => tag !== tagToRemove));\n  };\n\n  const handlePublish = async () => {\n    if (title.trim() === \"\") {\n      alert(\"제목을 입력해주세요\");\n      return;\n    }\n\n    if (content.trim() === \"\") {\n      alert(\"내용을 입력해주세요\");\n      return;\n    }\n\n    // 태그 문자열\n    const tagString = tags.join(\",\");\n\n    try {\n      setSubmitting(true);\n\n      if (postId) {\n        const { error } = await supabase\n          .from(\"posts\")\n          .update({\n            title: title.trim(),\n            content: content.trim(),\n            tags: tagString,\n          })\n          .eq(\"id\", Number(postId))\n          .select();\n\n        if (error) {\n          alert(\"업데이트 중 문제가 발생했습니다.\");\n          return false;\n        }\n        alert(\"게시글이 수정되었습니다.\");\n        router.replace(`/post/${postId}`);\n      } else {\n        // 등록 로직\n        const {\n          data: { user },\n          error: userError,\n        } = await supabase.auth.getUser();\n\n        if (userError || !user) {\n          alert(\"로그인이 필요합니다.\");\n          setSubmitting(false);\n          return;\n        }\n\n        const { data, error } = await supabase\n          .from(\"posts\")\n          .insert([\n            {\n              profile_id: user.id,\n              title: title.trim(),\n              content: content.trim(),\n              tags: tagString,\n            },\n          ])\n          .select(\"id\")\n          .single();\n\n        if (error) {\n          alert(\"게시글 등록 중 오류가 발생했습니다.\");\n          setSubmitting(false);\n          return;\n        }\n\n        const newPostId = data.id;\n        if (newPostId) {\n          alert(\"게시글이 등록되었습니다.\");\n          router.push(`/post/${newPostId}`);\n        } else {\n          router.push(\"/\");\n        }\n      }\n    } catch (e) {\n      console.log(e);\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  useEffect(() => {\n    if (!postId) return;\n    // 즉시 실행함수\n    (async () => {\n      const {\n        data: { user },\n        error: userError,\n      } = await supabase.auth.getUser();\n\n      if (!user || userError) {\n        alert(\"로그인 후 수정이 가능합니다.\");\n        router.replace(\"/auth/login\");\n        return;\n      }\n\n      const { data, error } = await supabase\n        .from(\"posts\")\n        .select(\"*\")\n        .eq(\"id\", Number(postId))\n        .eq(\"profile_id\", user?.id ?? \"\")\n        .single();\n\n      if (!data || error) {\n        alert(\"내 게시글만 수정 가능합니다.\");\n        router.replace(\"/\");\n        return;\n      }\n\n      setTitle(data.title ?? \"\");\n      setContent(data.content ?? \"\");\n      if (Array.isArray(data.tags)) {\n        setTags(data.tags);\n      } else if (typeof data.tags === \"string\") {\n        setTags(\n          data.tags\n            .split(\",\")\n            .map((t) => t.trim())\n            .filter(Boolean)\n        );\n      }\n    })();\n  }, [postId, router, supabase]);\n\n  return (\n    <div className=\"max-w-4xl mx-auto\">\n      <div className=\"space-y-6\">\n        <div className=\"space-y-2\">\n          <h1 className=\"text-3xl font-light tracking-tight\">Write a Post</h1>\n          <p className=\"text-gray-400 text-sm\">\n            Share your thoughts with the world\n          </p>\n        </div>\n\n        <div className=\"space-y-4\">\n          <div className=\"space-y-2\">\n            <input\n              type=\"text\"\n              placeholder=\"Title\"\n              className=\"w-full px-4 py-3 rounded-lg bg-gray-900/30 border border-gray-800 focus:border-gray-700 focus:outline-none font-light placeholder:text-gray-600\"\n              value={title}\n              onChange={(e) => setTitle(e.target.value)}\n            />\n          </div>\n\n          <div className=\"space-y-2\">\n            <label className=\"block text-sm text-gray-400\">\n              Content (Markdown)\n            </label>\n            <textarea\n              placeholder=\"Write your post in markdown...\n\n## Heading 2\n### Heading 3\n\n**bold text**\n*italic text*\n\n- List item 1\n- List item 2\"\n              rows={20}\n              className=\"w-full px-4 py-3 rounded-lg bg-gray-900/30 border border-gray-800 focus:border-gray-700 focus:outline-none text-sm font-mono resize-none leading-relaxed\"\n              value={content}\n              onChange={(e) => setContent(e.target.value)}\n            />\n          </div>\n          <div className=\"space-y-2\">\n            <label className=\"block text-sm text-gray-400\">Tags</label>\n            <div className=\"flex gap-2\">\n              <input\n                type=\"text\"\n                placeholder=\"Add a tag\"\n                value={tagInput}\n                onChange={(e) => setTagInput(e.target.value)}\n                onKeyDown={(e) => {\n                  if (e.key === \"Enter\") {\n                    e.preventDefault();\n                    addTag();\n                  }\n                }}\n                className=\"flex-1 px-4 py-2 rounded-lg bg-gray-900/30 border border-gray-800 focus:border-gray-700 focus:outline-none text-sm\"\n              />\n              <button\n                type=\"button\"\n                onClick={addTag}\n                className=\"px-4 py-2 rounded-lg bg-gray-800 hover:bg-gray-700 transition-colors text-sm\"\n              >\n                Add\n              </button>\n            </div>\n            {tags.length > 0 && (\n              <div className=\"flex flex-wrap gap-2 mt-2\">\n                {tags.map((tag) => (\n                  <span\n                    key={tag}\n                    className=\"flex items-center gap-1 px-2 py-1 rounded bg-gray-800 text-gray-300 text-xs\"\n                  >\n                    {tag}\n                    <button\n                      type=\"button\"\n                      onClick={() => removeTag(tag)}\n                      className=\"hover:text-white\"\n                    >\n                      <X size={12} />\n                    </button>\n                  </span>\n                ))}\n              </div>\n            )}\n          </div>\n\n          <div className=\"flex gap-3 pt-4\">\n            <button\n              className=\"px-6 py-2 rounded-lg bg-gray-700 hover:bg-gray-600 transition-colors text-sm\"\n              onClick={handlePublish}\n              disabled={submitting}\n            >\n              {submitting\n                ? postId\n                  ? \"Updating...\"\n                  : \"Publishing...\"\n                : postId\n                ? \"Update\"\n                : \"Publish\"}\n            </button>\n            <button className=\"px-6 py-2 rounded-lg border border-gray-800 hover:border-gray-700 hover:bg-gray-900/50 transition-colors text-sm\">\n              Save Draft\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}