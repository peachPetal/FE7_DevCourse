{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/learn-next/final/src/middleware.ts"],"sourcesContent":["import { NextResponse, type NextRequest } from \"next/server\";\nimport { createServerClient } from \"@supabase/ssr\";\nimport { Database } from \"@/utils/supabase/supabase\"; // π’΅ supabase.ts νƒ€μ… κ²½λ΅\n\n// π’΅ μ΄ ν•¨μλ” λ―Έλ“¤μ›¨μ–΄μ—μ„λ§ μ‚¬μ©ν•  λ³„λ„μ Supabase ν΄λΌμ΄μ–ΈνΈμ…λ‹λ‹¤.\n// π’΅ server.tsλ‚ client.tsμ κ²ƒκ³Όλ” λ‹¤λ¦…λ‹λ‹¤.\nconst createClient = (request: NextRequest) => {\n  // Create an unmodified response\n  let response = NextResponse.next({\n    request: {\n      headers: request.headers,\n    },\n  });\n\n  const supabase = createServerClient<Database>(\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\n    process.env.NEXT_PUBLIC_SUPABASE_PUBLISHABLE_KEY!,\n    {\n      cookies: {\n        getAll() {\n          return request.cookies.getAll();\n        },\n        setAll(cookiesToSet) {\n          cookiesToSet.forEach(({ name, value, options }) =>\n            request.cookies.set(name, value, options)\n          );\n          response = NextResponse.next({\n            request: {\n              headers: request.headers,\n            },\n          });\n          cookiesToSet.forEach(({ name, value, options }) =>\n            response.cookies.set(name, value, options)\n          );\n        },\n      },\n    }\n  );\n\n  return { supabase, response };\n};\n\nexport async function middleware(request: NextRequest) {\n  const { supabase, response } = createClient(request);\n\n  // π’΅ λ―Έλ“¤μ›¨μ–΄μ ν•µμ‹¬ μ—­ν• : λ¨λ“  μ„λ²„ μ»΄ν¬λ„νΈ λ λ”λ§ μ „μ—\n  // π’΅ ν„μ¬ μ‚¬μ©μ μ„Έμ…μ„ κ°€μ Έμ™€μ„ μΏ ν‚¤λ¥Ό 'μƒλ΅κ³ μΉ¨'ν•©λ‹λ‹¤.\n  await supabase.auth.getUser();\n\n  // π’΅ μƒλ΅κ³ μΉ¨λ μΏ ν‚¤κ°€ ν¬ν•¨λ μ‘λ‹µμ„ λ°ν™ν•©λ‹λ‹¤.\n  return response;\n}\n\n// π’΅ λ―Έλ“¤μ›¨μ–΄κ°€ μ‹¤ν–‰λ  κ²½λ΅λ¥Ό μ§€μ •ν•©λ‹λ‹¤.\n// π’΅ λ¶ν•„μ”ν• κ²½λ΅(_next/static, _next/image, favicon.ico λ“±)λ¥Ό μ μ™Έν•©λ‹λ‹¤.\nexport const config = {\n  matcher: [\n    /*\n     * Match all request paths except for the ones starting with:\n     * - _next/static (static files)\n     * - _next/image (image optimization files)\n     * - favicon.ico (favicon file)\n     * Feel free to modify this pattern to include more paths.\n     */\n    \"/((?!_next/static|_next/image|favicon.ico|.*\\\\.(?:svg|png|jpg|jpeg|gif|webp)$).*)\",\n  ],\n};"],"names":[],"mappings":";;;;;;AAAA;AAAA;AACA;AAAA;;;AAGA,8CAA8C;AAC9C,qCAAqC;AACrC,MAAM,eAAe,CAAC;IACpB,gCAAgC;IAChC,IAAI,WAAW,0NAAY,CAAC,IAAI,CAAC;QAC/B,SAAS;YACP,SAAS,QAAQ,OAAO;QAC1B;IACF;IAEA,MAAM,WAAW,IAAA,iOAAkB,sUAGjC;QACE,SAAS;YACP;gBACE,OAAO,QAAQ,OAAO,CAAC,MAAM;YAC/B;YACA,QAAO,YAAY;gBACjB,aAAa,OAAO,CAAC,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE,GAC5C,QAAQ,OAAO,CAAC,GAAG,CAAC,MAAM,OAAO;gBAEnC,WAAW,0NAAY,CAAC,IAAI,CAAC;oBAC3B,SAAS;wBACP,SAAS,QAAQ,OAAO;oBAC1B;gBACF;gBACA,aAAa,OAAO,CAAC,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE,GAC5C,SAAS,OAAO,CAAC,GAAG,CAAC,MAAM,OAAO;YAEtC;QACF;IACF;IAGF,OAAO;QAAE;QAAU;IAAS;AAC9B;AAEO,eAAe,WAAW,OAAoB;IACnD,MAAM,EAAE,QAAQ,EAAE,QAAQ,EAAE,GAAG,aAAa;IAE5C,oCAAoC;IACpC,oCAAoC;IACpC,MAAM,SAAS,IAAI,CAAC,OAAO;IAE3B,8BAA8B;IAC9B,OAAO;AACT;AAIO,MAAM,SAAS;IACpB,SAAS;QACP;;;;;;KAMC,GACD;KACD;AACH"}}]
}