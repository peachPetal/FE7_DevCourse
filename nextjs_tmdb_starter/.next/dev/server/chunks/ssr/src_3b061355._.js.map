{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/peachpetal/workspace/FE7_DevCourse/nextjs_tmdb_starter/src/libs/api/movie.ts"],"sourcesContent":["const url = 'https://api.themoviedb.org/3';\nconst options = {\n  method: 'GET',\n  headers: {\n    accept: 'application/json',\n    Authorization: 'Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJjNWM2NmI4NWQxM2M0Yzk1NzJlYzhlNzQ1NjgwMzY5NSIsIm5iZiI6MTc1ODY5OTc0MC4yMDEsInN1YiI6IjY4ZDNhMGRjY2E3MjdjNzFkMTcxOWIyZiIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.E-Wm-zl47MgP75RW36u6py-jgjTw5UsPjNLKwSQlJHQ'\n  }\n};\n\nexport const getMovieData = async(path: string, genres?: string) => {\n  if(path === \"discover/movie\"){\n    return await(\n      await fetch(`${url}/${path}?with_genres=${genres}`, {\n        ...options,\n        next: {\n          revalidate: 60 * 60 * 24,\n        },\n      })\n    ).json();\n  }else {\n    return await(\n        await fetch(`${url}/movie/${path}`, {\n            ...options,\n            next: {\n                revalidate: 60 * 60,\n            },\n        })\n    ).json();\n  }\n}\n\n// getMovieVideoData\nexport const getMovieVideoData = async(id: number) => {\n  return await(\n    await fetch(`${url}/movie/${id}/videos`, {\n      ...options,\n      next: {\n        revalidate: 60 * 60 * 24,\n      },\n    })\n  ).json();\n}\n// getMovieDetailData\nexport const getMovieDetailData = async(id: number) => {\n  return await(\n    await fetch(`${url}/movie/${id}`, {\n      ...options,\n      next: {\n        revalidate: 60 * 60 * 24,\n      },\n    })\n  ).json();\n}\n\nexport const getMovieCredits = async(id: number) => {\n  return await(\n    await fetch(`${url}/movie/${id}/credits`, {\n      ...options,\n      next: {\n        revalidate: 60 * 60 * 24,\n      },\n    })\n  ).json();\n}\n\nexport const getMovieMoreData = async(page: number, type: string, keyword: string) => {\n  if(keyword){\n    return await(\n      await fetch(`${url}/search/movie?query=${encodeURIComponent(keyword)}&page=${page}`, {\n        ...options,\n        next: {\n          revalidate: 60 * 60 * 24,\n        },\n      })\n    ).json();\n  } else {\n    return await(\n      await fetch(`${url}/movie/${type}?page=${page}`, {\n        ...options,\n      })\n    ).json();\n  }\n}"],"names":[],"mappings":";;;;;;;;;;;;AAAA,MAAM,MAAM;AACZ,MAAM,UAAU;IACd,QAAQ;IACR,SAAS;QACP,QAAQ;QACR,eAAe;IACjB;AACF;AAEO,MAAM,eAAe,OAAM,MAAc;IAC9C,IAAG,SAAS,kBAAiB;QAC3B,OAAO,MAAK,CACV,MAAM,MAAM,GAAG,IAAI,CAAC,EAAE,KAAK,aAAa,EAAE,QAAQ,EAAE;YAClD,GAAG,OAAO;YACV,MAAM;gBACJ,YAAY,KAAK,KAAK;YACxB;QACF,EACF,EAAE,IAAI;IACR,OAAM;QACJ,OAAO,MAAK,CACR,MAAM,MAAM,GAAG,IAAI,OAAO,EAAE,MAAM,EAAE;YAChC,GAAG,OAAO;YACV,MAAM;gBACF,YAAY,KAAK;YACrB;QACJ,EACJ,EAAE,IAAI;IACR;AACF;AAGO,MAAM,oBAAoB,OAAM;IACrC,OAAO,MAAK,CACV,MAAM,MAAM,GAAG,IAAI,OAAO,EAAE,GAAG,OAAO,CAAC,EAAE;QACvC,GAAG,OAAO;QACV,MAAM;YACJ,YAAY,KAAK,KAAK;QACxB;IACF,EACF,EAAE,IAAI;AACR;AAEO,MAAM,qBAAqB,OAAM;IACtC,OAAO,MAAK,CACV,MAAM,MAAM,GAAG,IAAI,OAAO,EAAE,IAAI,EAAE;QAChC,GAAG,OAAO;QACV,MAAM;YACJ,YAAY,KAAK,KAAK;QACxB;IACF,EACF,EAAE,IAAI;AACR;AAEO,MAAM,kBAAkB,OAAM;IACnC,OAAO,MAAK,CACV,MAAM,MAAM,GAAG,IAAI,OAAO,EAAE,GAAG,QAAQ,CAAC,EAAE;QACxC,GAAG,OAAO;QACV,MAAM;YACJ,YAAY,KAAK,KAAK;QACxB;IACF,EACF,EAAE,IAAI;AACR;AAEO,MAAM,mBAAmB,OAAM,MAAc,MAAc;IAChE,IAAG,SAAQ;QACT,OAAO,MAAK,CACV,MAAM,MAAM,GAAG,IAAI,oBAAoB,EAAE,mBAAmB,SAAS,MAAM,EAAE,MAAM,EAAE;YACnF,GAAG,OAAO;YACV,MAAM;gBACJ,YAAY,KAAK,KAAK;YACxB;QACF,EACF,EAAE,IAAI;IACR,OAAO;QACL,OAAO,MAAK,CACV,MAAM,MAAM,GAAG,IAAI,OAAO,EAAE,KAAK,MAAM,EAAE,MAAM,EAAE;YAC/C,GAAG,OAAO;QACZ,EACF,EAAE,IAAI;IACR;AACF","debugId":null}},
    {"offset": {"line": 83, "column": 0}, "map": {"version":3,"sources":["file:///home/peachpetal/workspace/FE7_DevCourse/nextjs_tmdb_starter/src/components/movie/MovieImage.tsx"],"sourcesContent":["\"use client\";\nimport Image from \"next/image\";\nimport { useState } from \"react\";\n\nexport default function MovieImage({\n  poster_path,\n  title,\n}: {\n  poster_path: string;\n  title: string;\n}) {\n  const [isError, setIsError] = useState(false);\n  const handleError = () => setIsError(true);\n  return (\n    <>\n      {!isError && (\n        <Image\n          src={`https://image.tmdb.org/t/p/w300${poster_path}`}\n          alt={title}\n          fill\n          sizes=\"300\"\n          loading=\"eager\"\n          onError={handleError}\n        />\n      )}\n      {isError && (\n        <Image\n          src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAIAAAD2HxkiAAAAA3NCSVQICAjb4U/gAAAAg0lEQVR4nO3BMQEAAADCoPdPbQ43oAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8C1FIAAGs7t8sAAAAASUVORK5CYII=\"\n          alt=\"placeholder\"\n          loading=\"lazy\"\n          decoding=\"async\"\n          data-nimg=\"fill\"\n          width={300}\n          height={0}\n          style={{\n            position: \"absolute\",\n            height: \"100%\",\n            width: \"100%\",\n            left: 0,\n            top: 0,\n            right: 0,\n            bottom: 0,\n            color: \"transparent\",\n            background: \"#ccc\",\n          }}\n        />\n      )}\n    </>\n  );\n}\n"],"names":[],"mappings":";;;;;AACA;AACA;AAFA;;;;AAIe,SAAS,WAAW,EACjC,WAAW,EACX,KAAK,EAIN;IACC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,cAAc,IAAM,WAAW;IACrC,qBACE;;YACG,CAAC,yBACA,8OAAC,wIAAK;gBACJ,KAAK,CAAC,+BAA+B,EAAE,aAAa;gBACpD,KAAK;gBACL,IAAI;gBACJ,OAAM;gBACN,SAAQ;gBACR,SAAS;;;;;;YAGZ,yBACC,8OAAC,wIAAK;gBACJ,KAAI;gBACJ,KAAI;gBACJ,SAAQ;gBACR,UAAS;gBACT,aAAU;gBACV,OAAO;gBACP,QAAQ;gBACR,OAAO;oBACL,UAAU;oBACV,QAAQ;oBACR,OAAO;oBACP,MAAM;oBACN,KAAK;oBACL,OAAO;oBACP,QAAQ;oBACR,OAAO;oBACP,YAAY;gBACd;;;;;;;;AAKV","debugId":null}},
    {"offset": {"line": 142, "column": 0}, "map": {"version":3,"sources":["file:///home/peachpetal/workspace/FE7_DevCourse/nextjs_tmdb_starter/src/components/list/ListMovieClient.tsx"],"sourcesContent":["\"use client\";\n\nimport { getMovieMoreData } from \"@/libs/api/movie\";\nimport { useCallback, useEffect, useRef, useState } from \"react\";\nimport MovieImage from \"../movie/MovieImage\";\nimport Link from \"next/link\";\n\nexport default function ListMovieClient({\n  initialMovies,\n  totalPages,\n  type,\n  keyword,\n}: {\n  initialMovies: Movie[];\n  totalPages: number;\n  type: string;\n  keyword: string;\n}) {\n  const [movies, setMovies] = useState(initialMovies);\n  const [page, setPage] = useState(1);\n  const [isLoading, setIsLoading] = useState(false);\n  const [hasMore, setHasMore] = useState(page < totalPages);\n\n  const targetElRef = useRef<HTMLDivElement>(null);\n\n  const loadMore = useCallback(async () => {\n    setIsLoading(true);\n    try {\n      const nextPage = page + 1;\n      const { results }: { results: Movie[] } = await getMovieMoreData(\n        nextPage,\n        type,\n        keyword\n      );\n\n      setMovies((prevMovies) => {\n        const ids = new Set(prevMovies.map((v) => v.id));\n        return [...prevMovies, ...results.filter((v) => !ids.has(v.id))];\n      });\n\n      setPage(nextPage);\n      if (nextPage >= totalPages) setHasMore(false);\n    } catch (error) {\n      console.log(error);\n    } finally {\n      setIsLoading(false);\n    }\n  }, [page, type, totalPages, keyword]);\n\n  useEffect(() => {\n    if (!targetElRef.current) return;\n    const observer = new IntersectionObserver(\n      (entries) => {\n        if (entries[0].isIntersecting && !isLoading && hasMore) {\n          loadMore();\n        }\n      },\n      { rootMargin: \"200px\" }\n    );\n    observer.observe(targetElRef.current);\n    return () => observer.disconnect();\n  }, [hasMore, isLoading, loadMore]);\n\n  return (\n    <>\n      <div className=\"movie-list\">\n        {movies && movies.map((movie : Movie) => (\n          <Link\n            href={`/detail/${movie.id}`}\n            key={movie.id}\n            className=\"movie-list__item\"\n          >\n            <figure>\n              <MovieImage poster_path={movie.poster_path} title={movie.title} />\n            </figure>\n            <div className=\"movie-list__txt\">\n              <div\n                className={`progress-circle p${Math.floor(\n                  movie.vote_average * 10\n                )} ${Math.floor(movie.vote_average * 10) > 50 ? \"over50\" : \"\"}`}\n              >\n                <span>{Math.floor(movie.vote_average * 10)}%</span>\n                <div className=\"left-half-clipper\">\n                  <div className=\"first50-bar\"></div>\n                  <div className=\"value-bar\"></div>\n                </div>\n              </div>\n              <strong className=\"movie-list__title\">{movie.title}</strong>\n              <p className=\"movie-list__desc\">{movie.overview}</p>\n              <span className=\"movie-list__release\">\n                {movie.release_date} / 평점 {movie.vote_average.toFixed(1)}\n              </span>\n            </div>\n          </Link>\n        ))}\n      </div>\n      <div ref={targetElRef} style={{ height: \"1px\" }}></div>\n    </>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAOe,SAAS,gBAAgB,EACtC,aAAa,EACb,UAAU,EACV,IAAI,EACJ,OAAO,EAMR;IACC,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAC;IACrC,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAC;IACjC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAC3C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC,OAAO;IAE9C,MAAM,cAAc,IAAA,+MAAM,EAAiB;IAE3C,MAAM,WAAW,IAAA,oNAAW,EAAC;QAC3B,aAAa;QACb,IAAI;YACF,MAAM,WAAW,OAAO;YACxB,MAAM,EAAE,OAAO,EAAE,GAAyB,MAAM,IAAA,+IAAgB,EAC9D,UACA,MACA;YAGF,UAAU,CAAC;gBACT,MAAM,MAAM,IAAI,IAAI,WAAW,GAAG,CAAC,CAAC,IAAM,EAAE,EAAE;gBAC9C,OAAO;uBAAI;uBAAe,QAAQ,MAAM,CAAC,CAAC,IAAM,CAAC,IAAI,GAAG,CAAC,EAAE,EAAE;iBAAG;YAClE;YAEA,QAAQ;YACR,IAAI,YAAY,YAAY,WAAW;QACzC,EAAE,OAAO,OAAO;YACd,QAAQ,GAAG,CAAC;QACd,SAAU;YACR,aAAa;QACf;IACF,GAAG;QAAC;QAAM;QAAM;QAAY;KAAQ;IAEpC,IAAA,kNAAS,EAAC;QACR,IAAI,CAAC,YAAY,OAAO,EAAE;QAC1B,MAAM,WAAW,IAAI,qBACnB,CAAC;YACC,IAAI,OAAO,CAAC,EAAE,CAAC,cAAc,IAAI,CAAC,aAAa,SAAS;gBACtD;YACF;QACF,GACA;YAAE,YAAY;QAAQ;QAExB,SAAS,OAAO,CAAC,YAAY,OAAO;QACpC,OAAO,IAAM,SAAS,UAAU;IAClC,GAAG;QAAC;QAAS;QAAW;KAAS;IAEjC,qBACE;;0BACE,8OAAC;gBAAI,WAAU;0BACZ,UAAU,OAAO,GAAG,CAAC,CAAC,sBACrB,8OAAC,uKAAI;wBACH,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,EAAE;wBAE3B,WAAU;;0CAEV,8OAAC;0CACC,cAAA,8OAAC,oJAAU;oCAAC,aAAa,MAAM,WAAW;oCAAE,OAAO,MAAM,KAAK;;;;;;;;;;;0CAEhE,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCACC,WAAW,CAAC,iBAAiB,EAAE,KAAK,KAAK,CACvC,MAAM,YAAY,GAAG,IACrB,CAAC,EAAE,KAAK,KAAK,CAAC,MAAM,YAAY,GAAG,MAAM,KAAK,WAAW,IAAI;;0DAE/D,8OAAC;;oDAAM,KAAK,KAAK,CAAC,MAAM,YAAY,GAAG;oDAAI;;;;;;;0DAC3C,8OAAC;gDAAI,WAAU;;kEACb,8OAAC;wDAAI,WAAU;;;;;;kEACf,8OAAC;wDAAI,WAAU;;;;;;;;;;;;;;;;;;kDAGnB,8OAAC;wCAAO,WAAU;kDAAqB,MAAM,KAAK;;;;;;kDAClD,8OAAC;wCAAE,WAAU;kDAAoB,MAAM,QAAQ;;;;;;kDAC/C,8OAAC;wCAAK,WAAU;;4CACb,MAAM,YAAY;4CAAC;4CAAO,MAAM,YAAY,CAAC,OAAO,CAAC;;;;;;;;;;;;;;uBArBrD,MAAM,EAAE;;;;;;;;;;0BA2BnB,8OAAC;gBAAI,KAAK;gBAAa,OAAO;oBAAE,QAAQ;gBAAM;;;;;;;;AAGpD","debugId":null}}]
}